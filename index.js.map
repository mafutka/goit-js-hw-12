{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49679717-f5eb164bef18f43bdb971e28c\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport async function getImagesByQuery(query, page) {\n    const params = new URLSearchParams({\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    });\n  \n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`);\n        return response.data;\n      } catch (error) {\n        console.error(\"Fetch error:\", error);\n        throw error;\n      }\n    }","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const imageList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nlet lightbox = null;\n\nfunction createImageCard(image) {\n    const shortAlt = image.tags.split(',').slice(0, 3).join(', ');\n    return `\n    <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${shortAlt}\"\n            />\n            <div class=\"info\">\n                <div class=\"info-item\">\n                    <p class=\"info-label\">Likes</p>\n                    <span class=\"info-value\">${image.likes}</span>\n                </div>\n                <div class=\"info-item\">\n                    <p class=\"info-label\">Views</p>\n                    <span class=\"info-value\">${image.views}</span>\n                </div>\n                <div class=\"info-item\">\n                    <p class=\"info-label\">Comments</p>\n                    <span class=\"info-value\">${image.comments}</span>\n                </div>\n                <div class=\"info-item\">\n                    <p class=\"info-label\">Downloads</p>\n                    <span class=\"info-value\">${image.downloads}</span>\n                </div>\n            </div>\n        </a>\n    </li>\n    `;\n}\n\nexport function createGallery(images) {\n    const createMurkup = images.map(createImageCard).join('');\n    imageList.insertAdjacentHTML('beforeend', createMurkup);\n\n    if (lightbox) {\n        lightbox.refresh();\n    } else {\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        });\n    }\n}\n\nexport function clearGallery() {\n    imageList.innerHTML = '';\n    if (lightbox) {\n        lightbox.destroy();\n        lightbox = null;\n    }\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            left: 0,\n            top: height * 3,\n            behavior: 'smooth',\n        });\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, smoothScroll } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst searchInput = document.querySelector(\".input\");\nconst loadMore = document.querySelector(\".load-more\");\n\nlet page = 1;\nlet enteredInput = \"\";\n\nform.addEventListener(\"submit\", handleSubmit);\nloadMore.addEventListener(\"click\", onLoadMore);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  enteredInput = searchInput.value.trim();\n  page = 1;\n\n  if (!enteredInput) return;\n\n  showLoader();\n  clearGallery();\n  loadMore.classList.add(\"load-more-hidden\");\n\n  getImagesByQuery(enteredInput, page)\n    .then(data => {\n      if (!data.hits || data.hits.length === 0) {\n        iziToast.warning({ title: \"No results\", message: \"Try another query\" });\n        return;\n      }\n\n      createGallery(data.hits);\n\n      if (data.totalHits > page * 15) {\n        loadMore.classList.remove(\"load-more-hidden\");\n      }\n    })\n    .catch(error => {\n      iziToast.error({ title: \"Error\", message: error.message });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction onLoadMore() {\n  page++;\n  loadMore.classList.add(\"load-more-hidden\");\n  showLoader();\n\n  getImagesByQuery(enteredInput, page)\n    .then(data => {\n      createGallery(data.hits);\n      smoothScroll();\n\n      if (page * 15 >= data.totalHits) {\n        iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n      } else {\n        loadMore.classList.remove(\"load-more-hidden\");\n      }\n    })\n    .catch(error => {\n      iziToast.error({ title: \"Error\", message: error.message });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","error","imageList","loader","lightbox","createImageCard","image","shortAlt","createGallery","images","createMurkup","SimpleLightbox","clearGallery","showLoader","hideLoader","smoothScroll","galleryItem","height","form","searchInput","loadMore","enteredInput","handleSubmit","onLoadMore","event","data","iziToast"],"mappings":"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"}